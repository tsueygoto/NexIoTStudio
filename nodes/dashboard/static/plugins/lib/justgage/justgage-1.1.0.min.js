function getColor(e,t,o,i,n){var a,l,r,u,c,m,f,g,d,s,p,h,v,x,i=i||n.length>0;if(n.length>0)for(var b=0;b<n.length;b++)if(e>n[b].lo&&e<=n[b].hi)return n[b].color;if(1===(a=o.length))return o[0];for(l=i?1/a:1/(a-1),r=[],b=0;b<o.length;b++)u=i?l*(b+1):l*b,c=parseInt(cutHex(o[b]).substring(0,2),16),m=parseInt(cutHex(o[b]).substring(2,4),16),f=parseInt(cutHex(o[b]).substring(4,6),16),r[b]={pct:u,color:{r:c,g:m,b:f}};if(0===t)return"rgb("+[r[0].color.r,r[0].color.g,r[0].color.b].join(",")+")";for(var k=0;k<r.length;k++)if(t<=r[k].pct)return i?"rgb("+[r[k].color.r,r[k].color.g,r[k].color.b].join(",")+")":(g=r[k-1],d=r[k],s=d.pct-g.pct,p=(t-g.pct)/s,h=1-p,v=p,x={r:Math.floor(g.color.r*h+d.color.r*v),g:Math.floor(g.color.g*h+d.color.g*v),b:Math.floor(g.color.b*h+d.color.b*v)},"rgb("+[x.r,x.g,x.b].join(",")+")")}function setDy(e,t,o){(!ie||ie>9)&&e.node.firstChild.attributes.dy&&(e.node.firstChild.attributes.dy.value=0)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function humanFriendlyNumber(e,t){var o,i,n,a;for(i=(o=Math.pow)(10,t),n=7;n;)(a=o(10,3*n--))<=e&&(e=Math.round(e*i/a)/i+"KMGTPE"[n]);return e}function formatNumber(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function getStyle(e,t){var o="";return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),o=e.currentStyle[t]),o}function onCreateElementNsReady(e){void 0!==document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}JustGage=function(e){var t=this;if(null===e||void 0===e)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;var o;if(null!==e.id&&void 0!==e.id){if(!(o=document.getElementById(e.id)))return console.log("* justgage: No element with id : %s found",e.id),!1}else{if(null===e.parentNode||void 0===e.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;o=e.parentNode}var i=o.dataset?o.dataset:{};t.config={id:e.id,parentNode:t.kvLookup("parentNode",e,i,null),width:t.kvLookup("width",e,i,null),height:t.kvLookup("height",e,i,null),title:t.kvLookup("title",e,i,""),titleFontColor:t.kvLookup("titleFontColor",e,i,"#999999"),value:t.kvLookup("value",e,i,0,"float"),valueFontColor:t.kvLookup("valueFontColor",e,i,"#010101"),symbol:t.kvLookup("symbol",e,i,""),min:t.kvLookup("min",e,i,0,"float"),max:t.kvLookup("max",e,i,100,"float"),humanFriendlyDecimal:t.kvLookup("humanFriendlyDecimal",e,i,0),textRenderer:t.kvLookup("textRenderer",e,i,null),gaugeWidthScale:t.kvLookup("gaugeWidthScale",e,i,1),gaugeColor:t.kvLookup("gaugeColor",e,i,"#edebeb"),label:t.kvLookup("label",e,i,""),labelFontColor:t.kvLookup("labelFontColor",e,i,"#b3b3b3"),shadowOpacity:t.kvLookup("shadowOpacity",e,i,.2),shadowSize:t.kvLookup("shadowSize",e,i,5),shadowVerticalOffset:t.kvLookup("shadowVerticalOffset",e,i,3),levelColors:t.kvLookup("levelColors",e,i,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:t.kvLookup("startAnimationTime",e,i,700),startAnimationType:t.kvLookup("startAnimationType",e,i,">"),refreshAnimationTime:t.kvLookup("refreshAnimationTime",e,i,700),refreshAnimationType:t.kvLookup("refreshAnimationType",e,i,">"),donutStartAngle:t.kvLookup("donutStartAngle",e,i,90),valueMinFontSize:t.kvLookup("valueMinFontSize",e,i,16),titleMinFontSize:t.kvLookup("titleMinFontSize",e,i,10),labelMinFontSize:t.kvLookup("labelMinFontSize",e,i,10),minLabelMinFontSize:t.kvLookup("minLabelMinFontSize",e,i,10),maxLabelMinFontSize:t.kvLookup("maxLabelMinFontSize",e,i,10),hideValue:t.kvLookup("hideValue",e,i,!1),hideMinMax:t.kvLookup("hideMinMax",e,i,!1),hideInnerShadow:t.kvLookup("hideInnerShadow",e,i,!1),humanFriendly:t.kvLookup("humanFriendly",e,i,!1),noGradient:t.kvLookup("noGradient",e,i,!1),donut:t.kvLookup("donut",e,i,!1),relativeGaugeSize:t.kvLookup("relativeGaugeSize",e,i,!1),counter:t.kvLookup("counter",e,i,!1),decimals:t.kvLookup("decimals",e,i,0),customSectors:t.kvLookup("customSectors",e,i,[]),formatNumber:t.kvLookup("formatNumber",e,i,!1),borderColor:t.kvLookup("borderColor",e,i,"none"),middleMode:t.kvLookup("middleMode",e,i,!1)};var n,a,l,r,u,c,m,f,g,d,s,p,h,v,x,b,k,y,S,M,F,L;t.config.value>t.config.max&&(t.config.value=t.config.max),t.config.value<t.config.min&&(t.config.value=t.config.min),t.originalValue=t.kvLookup("value",e,i,-1,"float"),null!==t.config.id&&null!==document.getElementById(t.config.id)?t.canvas=Raphael(t.config.id,"100%","100%"):null!==t.config.parentNode&&(t.canvas=Raphael(t.config.parentNode,"100%","100%")),!0===t.config.relativeGaugeSize&&t.canvas.setViewBox(0,0,200,150,!0),!0===t.config.relativeGaugeSize?(n=200,a=150):null!==t.config.width&&null!==t.config.height?(n=t.config.width,a=t.config.height):null!==t.config.parentNode?(t.canvas.setViewBox(0,0,200,150,!0),n=200,a=150):(n=1*getStyle(document.getElementById(t.config.id),"width").slice(0,-2),a=1*getStyle(document.getElementById(t.config.id),"height").slice(0,-2)),!0===t.config.donut?(n>a?l=r=a:n<a?(r=l=n)>a&&(l=(r/=u=r/a)/u):r=l=n,c=(n-l)/2,m=(a-r)/2,f=r/8>10?r/10:10,g=c+l/2,d=m+r/11,s=r/6.4>16?r/5.4:18,p=c+l/2,x=c+l/2,b=(h=""!==t.config.label?m+r/1.85:m+r/1.7)+(v=r/16>10?r/16:10),k=r/16>10?r/16:10,y=c+l/10+l/6.666666666666667*t.config.gaugeWidthScale/2,S=b,M=r/16>10?r/16:10,F=c+l-l/10-l/6.666666666666667*t.config.gaugeWidthScale/2,L=b):(n>a?(l=1.25*(r=a))>n&&(l/=u=l/n,r/=u):n<a?(r=(l=n)/1.25)>a&&(l=(r/=u=r/a)/u):r=.75*(l=n),c=(n-l)/2,m=(a-r)/2,f=r/8>t.config.titleMinFontSize?r/10:t.config.titleMinFontSize,g=c+l/2,d=m+r/6.4,s=r/6.5>t.config.valueMinFontSize?r/6.5:t.config.valueMinFontSize,p=c+l/2,h=m+r/1.275,v=r/16>t.config.labelMinFontSize?r/16:t.config.labelMinFontSize,x=c+l/2,b=h+s/2+5,k=r/16>t.config.minLabelMinFontSize?r/16:t.config.minLabelMinFontSize,y=c+l/10+l/6.666666666666667*t.config.gaugeWidthScale/2,S=b,M=r/16>t.config.maxLabelMinFontSize?r/16:t.config.maxLabelMinFontSize,F=c+l-l/10-l/6.666666666666667*t.config.gaugeWidthScale/2,L=b),t.params={canvasW:n,canvasH:a,widgetW:l,widgetH:r,dx:c,dy:m,titleFontSize:f,titleX:g,titleY:d,valueFontSize:s,valueX:p,valueY:h,labelFontSize:v,labelX:x,labelY:b,minFontSize:k,minX:y,minY:S,maxFontSize:M,maxX:F,maxY:L},L=null,t.canvas.customAttributes.pki=function(e,t,o,i,n,a,l,r,u,c){var m,f,g,d,s,p,h,v,x,b;return u?(m=(1-2*(e-t)/(o-t))*Math.PI,f=i/2-i/7,g=f-i/6.666666666666667*r,d=i/2+a,s=n/1.95+l,p=i/2+a+f*Math.cos(m),h=n-(n-s)-f*Math.sin(m),v=i/2+a+g*Math.cos(m),x=n-(n-s)-g*Math.sin(m),b="M"+(d-g)+","+s+" ",b+="L"+(d-f)+","+s+" ",e>(o-t)/2&&(b+="A"+f+","+f+" 0 0 1 "+(d+f)+","+s+" "),b+="A"+f+","+f+" 0 0 1 "+p+","+h+" ",b+="L"+v+","+x+" ",e>(o-t)/2&&(b+="A"+g+","+g+" 0 0 0 "+(d+g)+","+s+" "),b+="A"+g+","+g+" 0 0 0 "+(d-g)+","+s+" ",b+="Z ",{path:b}):(m=(1-(e-t)/(o-t))*Math.PI,f=i/2-i/10,g=f-i/6.666666666666667*r,d=i/2+a,s=n/1.25+l,p=i/2+a+f*Math.cos(m),h=n-(n-s)-f*Math.sin(m),v=i/2+a+g*Math.cos(m),x=n-(n-s)-g*Math.sin(m),c?e>(o+t)/2?(b="M"+d+","+(s-g)+" ",b+="L"+d+","+(s-f)+" ",b+="A"+f+","+f+" 0 0 1 "+p+","+h+" ",b+="L"+v+","+x+" ",b+="A"+g+","+g+" 0 0 0 "+d+","+(s-g)+" ",b+="Z "):(b="M"+d+","+(s-g)+" ",b+="L"+d+","+(s-f)+" ",b+="A"+f+","+f+" 0 0 0 "+p+","+h+" ",b+="L"+v+","+x+" ",b+="A"+g+","+g+" 0 0 1 "+d+","+(s-g)+" ",b+="Z "):(b="M"+(d-g)+","+s+" ",b+="L"+(d-f)+","+s+" ",b+="A"+f+","+f+" 0 0 1 "+p+","+h+" ",b+="L"+v+","+x+" ",b+="A"+g+","+g+" 0 0 0 "+(d-g)+","+s+" ",b+="Z "),{path:b})},t.config.middleMode?(t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.middleMode]}),t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.middleMode]})):t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.middleMode]}),t.level=t.canvas.path().attr({stroke:t.config.borderColor,fill:getColor(t.config.value,(t.config.value-t.config.min)/(t.config.max-t.config.min),t.config.levelColors,t.config.noGradient,t.config.customSectors),pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.middleMode]}),t.config.donut&&t.level.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy)),t.txtTitle=t.canvas.text(t.params.titleX,t.params.titleY,t.config.title),t.txtTitle.attr({"font-size":t.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.titleFontColor,"fill-opacity":"1"}),setDy(t.txtTitle,t.params.titleFontSize,t.params.titleY),t.txtValue=t.canvas.text(t.params.valueX,t.params.valueY,0),t.txtValue.attr({"font-size":t.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.valueFontColor,"fill-opacity":"0"}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),t.txtLabel=t.canvas.text(t.params.labelX,t.params.labelY,t.config.label),t.txtLabel.attr({"font-size":t.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":"0"}),setDy(t.txtLabel,t.params.labelFontSize,t.params.labelY),t.txtMinimum=t.config.min,t.config.humanFriendly?t.txtMinimum=humanFriendlyNumber(t.config.min,t.config.humanFriendlyDecimal):t.config.formatNumber&&(t.txtMinimum=formatNumber(t.config.min)),t.txtMin=t.canvas.text(t.params.minX,t.params.minY,t.txtMinimum),t.txtMin.attr({"font-size":t.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMin,t.params.minFontSize,t.params.minY),t.txtMaximum=t.config.max,t.config.formatNumber?t.txtMaximum=formatNumber(t.txtMaximum):t.config.humanFriendly&&(t.txtMaximum=humanFriendlyNumber(t.config.max,t.config.humanFriendlyDecimal)),t.txtMax=t.canvas.text(t.params.maxX,t.params.maxY,t.txtMaximum),t.txtMax.attr({"font-size":t.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMax,t.params.maxFontSize,t.params.maxY);var w=t.canvas.canvas.childNodes[1],A="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){t.generateShadow(A,w)}):t.generateShadow(A,w)),A=null,t.config.textRenderer?t.originalValue=t.config.textRenderer(t.originalValue):t.config.humanFriendly?t.originalValue=humanFriendlyNumber(t.originalValue,t.config.humanFriendlyDecimal)+t.config.symbol:t.config.formatNumber?t.originalValue=formatNumber(t.originalValue)+t.config.symbol:t.originalValue=(1*t.originalValue).toFixed(t.config.decimals)+t.config.symbol,!0===t.config.counter?(eve.on("raphael.anim.frame."+t.level.id,function(){var e=t.level.attr("pki");t.config.textRenderer?t.txtValue.attr("text",t.config.textRenderer(Math.floor(e[0]))):t.config.humanFriendly?t.txtValue.attr("text",humanFriendlyNumber(Math.floor(e[0]),t.config.humanFriendlyDecimal)+t.config.symbol):t.config.formatNumber?t.txtValue.attr("text",formatNumber(Math.floor(e[0]))+t.config.symbol):t.txtValue.attr("text",(1*e[0]).toFixed(t.config.decimals)+t.config.symbol),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),e=null}),eve.on("raphael.anim.finish."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})):eve.on("raphael.anim.start."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),t.level.animate({pki:[t.config.value,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.middleMode]},t.config.startAnimationTime,t.config.startAnimationType),t.txtValue.animate({"fill-opacity":t.config.hideValue?"0":"1"},t.config.startAnimationTime,t.config.startAnimationType),t.txtLabel.animate({"fill-opacity":"1"},t.config.startAnimationTime,t.config.startAnimationType)},JustGage.prototype.kvLookup=function(e,t,o,i,n,a){var l=i,r=!1;if(null!==e&&void 0!==e&&(null!==o&&void 0!==o&&"object"==typeof o&&e in o?(l=o[e],r=!0):null!==t&&void 0!==t&&"object"==typeof t&&e in t?(l=t[e],r=!0):l=i,!0===r&&null!==n&&void 0!==n))switch(n){case"int":l=parseInt(l,10);break;case"float":l=parseFloat(l)}return l},JustGage.prototype.refresh=function(e,t){var o,i,n=this;null!==(t=t||null)&&(n.config.max=t,n.txtMaximum=n.config.max,n.config.humanFriendly?n.txtMaximum=humanFriendlyNumber(n.config.max,n.config.humanFriendlyDecimal):n.config.formatNumber&&(n.txtMaximum=formatNumber(n.config.max)),n.txtMax.attr({text:n.txtMaximum}),setDy(n.txtMax,n.params.maxFontSize,n.params.maxY)),o=e,1*e>1*n.config.max&&(e=1*n.config.max),1*e<1*n.config.min&&(e=1*n.config.min),i=getColor(e,(e-n.config.min)/(n.config.max-n.config.min),n.config.levelColors,n.config.noGradient,n.config.customSectors),o=n.config.textRenderer?n.config.textRenderer(o):n.config.humanFriendly?humanFriendlyNumber(o,n.config.humanFriendlyDecimal)+n.config.symbol:n.config.formatNumber?formatNumber((1*o).toFixed(n.config.decimals))+n.config.symbol:(1*o).toFixed(n.config.decimals)+n.config.symbol,n.originalValue=o,n.config.value=1*e,n.config.counter||(n.txtValue.attr({text:o}),setDy(n.txtValue,n.params.valueFontSize,n.params.valueY)),n.level.animate({pki:[n.config.value,n.config.min,n.config.max,n.params.widgetW,n.params.widgetH,n.params.dx,n.params.dy,n.config.gaugeWidthScale,n.config.donut,n.config.middleMode],fill:i},n.config.refreshAnimationTime,n.config.refreshAnimationType),t=null},JustGage.prototype.generateShadow=function(e,t){var o,i,n,a,l,r,u,c=this;(o=document.createElementNS(e,"filter")).setAttribute("id","inner-shadow"),t.appendChild(o),(i=document.createElementNS(e,"feOffset")).setAttribute("dx",0),i.setAttribute("dy",c.config.shadowVerticalOffset),o.appendChild(i),(n=document.createElementNS(e,"feGaussianBlur")).setAttribute("result","offset-blur"),n.setAttribute("stdDeviation",c.config.shadowSize),o.appendChild(n),(a=document.createElementNS(e,"feComposite")).setAttribute("operator","out"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","offset-blur"),a.setAttribute("result","inverse"),o.appendChild(a),(l=document.createElementNS(e,"feFlood")).setAttribute("flood-color","black"),l.setAttribute("flood-opacity",c.config.shadowOpacity),l.setAttribute("result","color"),o.appendChild(l),(r=document.createElementNS(e,"feComposite")).setAttribute("operator","in"),r.setAttribute("in","color"),r.setAttribute("in2","inverse"),r.setAttribute("result","shadow"),o.appendChild(r),(u=document.createElementNS(e,"feComposite")).setAttribute("operator","over"),u.setAttribute("in","shadow"),u.setAttribute("in2","SourceGraphic"),o.appendChild(u),c.config.hideInnerShadow||(c.canvas.canvas.childNodes[2].setAttribute("filter","url(#inner-shadow)"),c.canvas.canvas.childNodes[3].setAttribute("filter","url(#inner-shadow)")),u=null};var ie=function(){for(var e=3,t=document.createElement("div"),o=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",o[0];);return e>4?e:void 0}();