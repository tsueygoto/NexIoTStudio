<style>

.arrows {
	width: 60px;
	height: 72px;
	position: absolute;
	left: 50%;
	margin-left: -30px;
	bottom: 20px;
}

.arrows path {
	//stroke: #2994D1;
    stroke: #FF0000;
	fill: transparent;
	stroke-width: 3px;	
	animation: arrow 2s infinite;
	-webkit-animation: arrow 2s infinite; 
}


@keyframes arrow
{
0% {opacity:0}
40% {opacity:1}
80% {opacity:0}
100% {opacity:0}
}

@-webkit-keyframes arrow /*Safari and Chrome*/
{
0% {opacity:0}
40% {opacity:1}
80% {opacity:0}
100% {opacity:0}
}

.arrows path.a1 {
	animation-delay:-1s;
	-webkit-animation-delay:-1s; /* Safari 和 Chrome */
}

.arrows path.a2 {
	animation-delay:-0.5s;
	-webkit-animation-delay:-0.5s; /* Safari 和 Chrome */
}

.arrows path.a3 {	
	animation-delay:0s;
	-webkit-animation-delay:0s; /* Safari 和 Chrome */
}

</style>

<script type="text/javascript">
  ( function() {
        var ImagePlugin = function( container , datasources , components , dsconfig ) {
            this.datasources = datasources;
            this.components = components;
            this.container = $(container);
            this.config = dsconfig;
            
            var tubeConf = [
                {file:"images/factory/Tubes-1.svg", viewBox:"0 0 35 100"},
                {file:"images/factory/Tubes-2.svg", viewBox:"0.499 0.5 100 35"},
                {file:"images/factory/Tubes-3.svg", viewBox:"-0.771 -0.27 96 96"},
                {file:"images/factory/Tubes-4.svg", viewBox:"-1.271 -0.27 96 96"}
            ];
            
            this.config.file = Number( this.config.file );
            if( isNaN( this.config.file ) ) this.config.file = 0;

/*
                <path class="a1" d="M3 14 L17 46 L31 14"></path>  \
                <path class="a2" d="M3 34 L17 66 L31 34"></path>  \
                <path class="a3" d="M3 54 L17 86 L31 54"></path>  \
            '   <svg class="arrows"> \
                <path class="a3" d="M3 46 L17 14 L31 46"></path>  \
                <path class="a2" d="M3 66 L17 34 L31 66"></path>  \
                <path class="a1" d="M3 86 L17 54 L31 86"></path>  \
                </svg>' +
                
                
                
<svg xmlns="http://www.w3.org/2000/svg" width="300px" height="100px">
      <rect x="0" y="0" width="300" height="100" stroke="black" stroke-width="1" />
        <circle cx="0" cy="50" r="15" fill="blue" stroke="black" stroke-width="1">
          <animateMotion path="M 0 0 H 300 Z" dur="3s" repeatCount="indefinite" />
        </circle>
      </svg>                
repeatCount="indefinite"
 */
            
        var content = 
            '<svg width="100%" height="100%" viewBox="' + tubeConf[this.config.file].viewBox + '" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink">' +
            '   <image xlink:href="' +
            tubeConf[this.config.file].file + //images/factory/Corners-1.svg +
            '" x="0" y="0" height="100%" width="100%" />' +
            
/*
            '<rect x="0" y="-11" width="35" height="10" stroke="red" stroke-opacity="0.4" stroke-width="1" fill="#FF0000" fill-opacity="0.4" >' +
            '<animateMotion path="M 0 -10 V 100" dur="3s" repeatCount="indefinite" fill="freeze" />'
            '</rect>' +

            '   <svg class="arrows"> \
                <path class="a3" d="M3 46 L17 14 L31 46"></path>  \
                <path class="a2" d="M3 66 L17 34 L31 66"></path>  \
                <path class="a1" d="M3 86 L17 54 L31 86"></path>  \
                </svg>' +
*/            
            '</svg>';

        this.container.append(content);
    };

    ImagePlugin.prototype.pushData = function( index , data ) {
      //if( this.components[ index ].getData( data.data ).type === "ok" )
      //{
      //  this.$alertGlow.removeClass( "animate" );
      //}
      //else
      //{
      //  this.$alertGlow.addClass( "animate" );
      //}
    };

    App.Plugins.registerChartType( "tube-plugin" , ImagePlugin , {
        category : "Factory",
        display_name : "Tube",
        disableComponentDiscovery : true,
        chartConfig : {
            file : {default : 0}
        },
        color: "rgb(204, 204, 255)"
    });

  } )();
</script>

<script type="text/x-dash" data-chart-config="tube-plugin">
    <div class="form-group">
        <label for="file">Type</label>
        <select class="form-control" data-prop="file">
          <option value=0>Tube 1</option>
          <option value=1>Tube 2</option>
          <option value=2>Tube 3</option>
          <option value=3>Tube 4</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-name="tube-plugin">
    <h3>* DataSource *</h3>
    <p>DataSource any.</p>
    
    <h3>* Configuration *</h3>
    <p><b>Type</b> : There are 4 types can select in below.</p>
<pre>
   Tube 1
   Tube 2
   Tube 3
   Tube 4</pre>
    
    <h3>* Shape *</h3>
    <div><p>The 4 Types.</p><p style="text-align: center;"><img src="images/Tubes.png" /></p></div>
</script>


